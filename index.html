<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>verify you are a human</title>
<style>
  body { 
    font-family: Arial; 
    text-align: center; 
    margin-top: 50px; 
    background: #f0f0f0; 
  }
  #captchaText { 
    font-size: 24px; 
    margin-bottom: 20px; 
    font-weight: bold; 
  }
  #buttons {
    display: grid;
    grid-template-columns: repeat(5, 100px);
    gap: 10px;
    justify-content: center;
    margin-bottom: 20px;
  }
  .color-btn { 
    width: 100px; 
    height: 100px; 
    border: none; 
    cursor: pointer; 
    border-radius: 50%; 
    transition: transform 0.2s; 
  }
  .color-btn:hover { transform: scale(1.1); }
  #progress { margin-top: 10px; font-size: 18px; }
  #timer { font-size: 20px; color: #ff0000; margin-bottom: 20px; }
</style>
</head>
<body>

<h2 id="captchaText"></h2>
<div id="timer">Time left: 10s</div>
<div id="buttons"></div>
<div id="progress">Progress: 0 / 5</div>

<script>
const colors = ['red','green','blue','yellow','orange','purple','pink','cyan','lime','brown'];
let sequence = [], progress = 0;
let timeLeft = 10;

// Generate 5-color sequence
for(let i=0;i<5;i++){
    sequence.push(colors[Math.floor(Math.random()*colors.length)]);
}

function shuffle(array){ return array.sort(()=>Math.random()-0.5); }

function showNext(){
    if(progress >= sequence.length){
        clearInterval(timerId);
        window.location.href = '/main.html'; // Navigate on success
    } else {
        document.getElementById('captchaText').innerText = 'Click: ' + sequence[progress].toUpperCase();
        let btns = shuffle([...colors]);
        document.getElementById('buttons').innerHTML = btns.map(c=>`<button class="color-btn" style="background:${c}" onclick="check('${c}')"></button>`).join('');
        document.getElementById('progress').innerText = `Progress: ${progress} / 5`;
    }
}

function check(color){
    if(color === sequence[progress]){
        progress++;
        showNext();
    } else {
        clearInterval(timerId);
        alert('Wrong color! ❌ Restarting...');
        location.reload();
    }
}

// Single 10-second timer for entire CAPTCHA
function startTimer(){
    timerId = setInterval(()=>{
        timeLeft--;
        document.getElementById('timer').innerText = `Time left: ${timeLeft}s`;
        if(timeLeft <= 0){
            clearInterval(timerId);
            alert('Time up! ⏰ Restarting...');
            location.reload();
        }
    },1000);
}

showNext();
startTimer();
</script>

</body>
</html>
